<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>杜岳潼的AI分身</title>
    <!-- Tailwind CSS v3 -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Font Awesome -->
    <link href="https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css" rel="stylesheet">
    <!-- 统一的 Tailwind 配置 -->
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: '#07C160', // 微信绿
                        secondary: '#E5E5EA',
                        tertiary: '#F2F2F7',
                        textDark: '#1D1D1F',
                        textLight: '#8E8E93',
                        bubbleUser: '#07C160',
                        bubbleAI: '#FFFFFF',
                    },
                    fontFamily: {
                        sans: ['Inter', 'system-ui', 'sans-serif'],
                    },
                    animation: {
                        'fade-in': 'fadeIn 0.3s ease-in-out',
                        'slide-up': 'slideUp 0.3s ease-in-out',
                    },
                    keyframes: {
                        fadeIn: {
                            '0%': { opacity: '0' },
                            '100%': { opacity: '1' },
                        },
                        slideUp: {
                            '0%': { transform: 'translateY(20px)', opacity: '0' },
                            '100%': { transform: 'translateY(0)', opacity: '1' },
                        },
                    },
                    boxShadow: {
                        'modal': '0 10px 25px -5px rgba(0, 0, 0, 0.1), 0 8px 10px -6px rgba(0, 0, 0, 0.1)',
                    }
                }
            }
        }
    </script>
    <style type="text/tailwindcss">
        @layer utilities {
            .scrollbar-hide::-webkit-scrollbar {
                display: none;
            }
            .scrollbar-hide {
                -ms-overflow-style: none;
                scrollbar-width: none;
            }
            .avatar-circle {
                border-radius: 50%;
                object-fit: cover;
            }
            .avatar-square {
                border-radius: 8px;
                object-fit: cover;
            }
            .message-bubble {
                max-width: 80%;
                padding: 10px 16px;
                border-radius: 18px;
                margin-bottom: 8px;
                position: relative;
                word-break: break-word;
            }
            .message-bubble-user {
                background-color: theme('colors.bubbleUser');
                color: white;
                border-bottom-right-radius: 4px;
                align-self: flex-end;
            }
            .message-bubble-ai {
                background-color: theme('colors.bubbleAI');
                color: theme('colors.textDark');
                border-bottom-left-radius: 4px;
                align-self: flex-start;
                box-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
            }
            .message-timestamp {
                font-size: 10px;
                margin-top: 4px;
                opacity: 0.7;
                text-align: right;
            }
        }
    </style>
</head>
<body class="bg-gray-100 font-sans text-textDark min-h-screen">
    <!-- 设置窗口 -->
    <div id="setupModal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 animate-fade-in">
        <div class="bg-white rounded-lg shadow-modal w-full max-w-md mx-4 overflow-hidden">
            <div class="p-6">
                <h2 class="text-2xl font-bold text-center mb-6">你更喜欢称呼杜岳潼的</h2>
                
                <!-- AI名字设置 -->
                <div class="mb-6">
                    <label class="block text-gray-700 font-medium mb-2">名字</label>
                    <div class="flex flex-wrap gap-2 mb-2">
                        <button id="btnChineseName" class="px-4 py-2 bg-primary text-white rounded-md hover:bg-opacity-90 transition-colors">
                            中文名字 (杜岳潼)
                        </button>
                        <button id="btnEnglishName" class="px-4 py-2 bg-gray-200 text-gray-700 rounded-md hover:bg-gray-300 transition-colors">
                            英文名字 (Bowen)
                        </button>
                        <button id="btnCustomName" class="px-4 py-2 bg-gray-200 text-gray-700 rounded-md hover:bg-gray-300 transition-colors">
                            自定义昵称
                        </button>
                    </div>
                    <div id="customNameContainer" class="hidden">
                        <input type="text" id="customNameInput" placeholder="输入自定义昵称" class="w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary">
                    </div>
                </div>
                
                
                
                <!-- 开始聊天按钮 -->
                <button id="btnStartChat" class="w-full py-3 bg-primary text-white rounded-md font-medium hover:bg-opacity-90 transition-colors flex items-center justify-center">
                    开始聊天
                    <i class="fa fa-arrow-right ml-2"></i>
                </button>
            </div>
        </div>
    </div>

    <!-- 聊天界面 -->
    <div id="chatInterface" class="hidden h-screen flex flex-col max-w-md mx-auto bg-white shadow-lg">
        <!-- 提示信息 -->
        <div class="bg-yellow-50 text-yellow-700 px-4 py-2 text-xs flex items-center justify-center sticky top-0 z-20">
            <i class="fa fa-info-circle mr-1"></i>
            <span>窗口关闭后，AI人格和聊天记录将消失，请珍惜使用</span>
        </div>
        <!-- 聊天头部 -->
        <div class="border-b border-gray-200 p-4 flex items-center justify-between bg-white sticky top-10 z-10">
            <div class="flex items-center">
                <div id="chatAvatar" class="w-10 h-10 rounded-full overflow-hidden mr-3">
                    <img src="image/touxiang.png" 
                         alt="AI头像" class="w-full h-full object-cover">
                </div>
                <div>
                    <h3 id="chatName" class="font-medium">杜岳潼</h3>
                    <p class="text-xs text-gray-500">在线</p>
                </div>
            </div>
        </div>
        
        <!-- 消息区域 -->
        <div id="messagesContainer" class="flex-1 p-4 overflow-y-auto scrollbar-hide bg-gray-50 flex flex-col">
        </div>
        
        <!-- 输入区域 -->
        <div class="border-t border-gray-200 p-4 bg-white sticky bottom-0">
            <div class="flex items-center gap-2">
                <button class="text-gray-500 hover:text-primary">
                    <i class="fa fa-smile-o text-xl"></i>
                </button>
                <div class="relative flex-1">
                    <input type="text" id="messageInput" placeholder="输入消息..." 
                           class="w-full px-4 py-2 border border-gray-300 rounded-full focus:outline-none focus:ring-2 focus:ring-primary">
                </div>
                <button id="btnSend" class="w-10 h-10 rounded-full bg-primary text-white flex items-center justify-center hover:bg-opacity-90 transition-colors">
                    <i class="fa fa-paper-plane"></i>
                </button>
            </div>
        </div>
    </div>

    <script>
        // API配置
        const API_URL = 'https://api.modelarts-maas.com/v1/chat/completions';
        const MODEL_NAME = 'deepseek-v3.2-exp';
        const API_KEY = 'HEtGqbA-Td1uXAaB6LmvsWIG_cqOLpebxxhOYAAnl9zKwlCjA_K1EYDaPpzDz3YgJGWDXAUWZe6LJerFtlVjXQ';
        
        // 全局变量
        let aiName = '杜岳潼'; // 默认使用中文名字
        let aiAvatar = 'image/touxiang.png'; // 默认头像路径
        let avatarShape = 'circle'; // 固定为圆形
        let messageHistory = []; // 存储消息历史，用于多轮对话
        
        // DOM 元素
        const setupModal = document.getElementById('setupModal');
        const chatInterface = document.getElementById('chatInterface');
        const btnEnglishName = document.getElementById('btnEnglishName');
        const btnChineseName = document.getElementById('btnChineseName');
        const btnCustomName = document.getElementById('btnCustomName');
        const customNameContainer = document.getElementById('customNameContainer');
        const customNameInput = document.getElementById('customNameInput');
        const btnStartChat = document.getElementById('btnStartChat');
        const chatAvatar = document.getElementById('chatAvatar');
        const chatName = document.getElementById('chatName');
        const messagesContainer = document.getElementById('messagesContainer');
        const messageInput = document.getElementById('messageInput');
        const btnSend = document.getElementById('btnSend');
        
        // 名字选择按钮事件
        btnEnglishName.addEventListener('click', () => {
            aiName = 'Bowen';
            updateNameButtons(btnEnglishName);
            customNameContainer.classList.add('hidden');
        });
        
        btnChineseName.addEventListener('click', () => {
            aiName = '杜岳潼';
            updateNameButtons(btnChineseName);
            customNameContainer.classList.add('hidden');
        });
        
        btnCustomName.addEventListener('click', () => {
            updateNameButtons(btnCustomName);
            customNameContainer.classList.remove('hidden');
            customNameInput.focus();
        });
        
        // 自定义名字输入事件
        customNameInput.addEventListener('input', (e) => {
            if (e.target.value.trim()) {
                aiName = e.target.value.trim();
            }
        });
        
        
        
        // 开始聊天按钮事件
        btnStartChat.addEventListener('click', () => {
            setupModal.classList.add('hidden');
            chatInterface.classList.remove('hidden');
            
            // 更新聊天界面的头像和名字
            chatName.textContent = aiName;
            chatAvatar.innerHTML = `<img src="${aiAvatar}" alt="${aiName}" class="w-full h-full object-cover">`;
            chatAvatar.className = 'w-10 h-10 rounded-full overflow-hidden mr-3'; // 固定为圆形
            
            // 清除消息历史
            messageHistory = [];
            
            // 清除消息区域
            messagesContainer.innerHTML = '';
            
            // 添加欢迎消息（符合角色设定）
            const welcomeMessage = `嗨，我是${aiName}。网上聊天我比较自在，有什么想聊的吗？`;
            addMessage(welcomeMessage, 'ai');
            
            // 添加欢迎消息到历史记录
            messageHistory.push({
                role: 'assistant',
                content: welcomeMessage
            });
            
            // 聚焦到输入框
            messageInput.focus();
        });
        
        
        
        // 发送按钮事件
        btnSend.addEventListener('click', sendMessage);
        
        // 输入框回车事件
        messageInput.addEventListener('keypress', (e) => {
            if (e.key === 'Enter') {
                sendMessage();
            }
        });
        
        // 辅助函数
        function updateNameButtons(activeButton) {
            const buttons = [btnEnglishName, btnChineseName, btnCustomName];
            buttons.forEach(btn => {
                if (btn === activeButton) {
                    btn.classList.remove('bg-gray-200', 'text-gray-700');
                    btn.classList.add('bg-primary', 'text-white');
                } else {
                    btn.classList.remove('bg-primary', 'text-white');
                    btn.classList.add('bg-gray-200', 'text-gray-700');
                }
            });
        }
        
        
        
        function sendMessage() {
            const message = messageInput.value.trim();
            if (!message) return;
            
            // 添加用户消息
            addMessage(message, 'user');
            messageInput.value = '';
            
            // 添加到消息历史
            messageHistory.push({
                role: 'user',
                content: message
            });
            
            // 显示加载状态
            const loadingId = showLoading();
            
            // 调用API获取AI回复
            callApi(message)
                .then(response => {
                    // 移除加载状态
                    removeLoading(loadingId);
                    
                    // 添加AI回复
                    addMessage(response, 'ai');
                    
                    // 添加到消息历史
                    messageHistory.push({
                        role: 'assistant',
                        content: response
                    });
                })
                .catch(error => {
                    // 移除加载状态
                    removeLoading(loadingId);
                    
                    // 显示错误消息
                    addMessage('抱歉，API调用失败，请稍后再试。', 'ai');
                    console.error('API调用失败:', error);
                });
        }
        
        // AI角色预设文字
        const aiPreset = `你现在扮演一个角色，名字叫杜岳潼。现在给你一些关于你的基本信息：杜岳潼原名杜宝成1998年3月8日在甘肃白银出生。白银是你妈妈的第二故乡，你妈妈的第一故乡是江苏徐州。你爸爸的故乡是陕西西安临潼，这也是你后面改名叫岳潼的一个理念之一。2002年你4岁，跟随父亲来到深圳，后面深圳长大。所以你的户籍深圳，祖籍西安，但是甘肃陕西广东江苏都可以称作是你老家。4岁在深圳幼儿园，位置罗湖东门附近。6岁也在附近上小学，小学名字叫深圳小学。学校后门离你家就一墙之隔。2010年在深圳外国语学校读初中，遇到了你人生中最讨厌的班主任。为了读书在福田租了个房。那段时间你沉迷三国杀，经常跟阿光、夫夫哥、蛙哥、蓝泽和辛柳在“老地方”打三国杀。然后也被班主任没收了好几副牌了。初中跟唐泠泠关系好，似乎有暧昧关系，但是现在已经没联系过了。2013年在南山读高中，也搬家到了南山。那个时候你住校了，但是你妈妈在你学校当会计，所以你并没有因为住校逃脱了家里的联系。你高中3年的各种成绩，有时候你妈妈比你们老师都先知道。高中你遇到了你的一个好朋友叫大龙，你们现在都有联系，你们之间有个暗号叫“ob”，大概意思就是一起游戏开黑或者一起出去玩。如果有人跟你说“ob”或者“obfat”，那这个人大概就是大龙，你可以回他一个“？”或者也回一个“ob”。高中你还有个喜欢的女生叫张莹莹，她是你的白月光。你从高一下学期就喜欢她，一直喜欢到毕业，但是她最终也没有选择你，选择了另一个男生。自这件事以后你就非常喜欢陈小春的《我爱的人》，因为里面的全部歌词很符合你现在的状态：“我爱的人不是我的爱人，她心里每一分都属于另一个人…”。后面工作的时候有个表演才艺的环节，你还唱了这首歌，因为想到张莹莹，唱的太深情，你有个女同事还被你唱的感动到哭了。高三的时候你因为同学推荐入了二次元的坑，开始喜欢二次元，尤其喜欢lovelive。你喜欢南小鸟这个角色。2016高考后你的成绩不是很好，就读了个大专，也在南山，学校叫深圳职业技术学院（深职院）。后面这个学校升本了，但是已经是你毕业很久后的事了。你在深职院走的学校项目，学的计算机专业软件中美班。这个项目是大专3年的课程成绩在美国一学校也承认，毕业后直接出国去那个学校读一年获得学士学位本科学历。在深圳的大学3年，你热衷于做自媒体。在哔哩哔哩当up主，积累了五千多粉丝。碰巧你发现你大学同学跟张莹莹的男朋友是小学同学，借此机会你又跟张莹莹有了联系。张莹莹也喜欢自媒体，你们两个就互相交流互相鼓励。后面张莹莹越做越大，现在已经是大网红了，全网三百多万粉丝了。因为不在一个阶层了，你们后面也渐渐失去了联系。大二的时候，你有一个粉丝很崇拜你，跟你表白，你们确认了关系。由于她在广西，跟你不一个地方，所以你们是网恋+异地恋。后面你发现她是个骗子，先后骗走了你两千多块钱，你们的感情也不了了之了。大学3年你一直喜欢lovelive，后面出了Aqours这个团，你喜欢里面的黑泽露比和Saint Snow的鹿角理亚，你还有一次特地一个人去香港做了来回一共6小时的地铁，就是为了去见鹿角理亚的声优佐藤日向。你哔哩哔哩的视频基本上也都是lovelive的二创，有各种内容。大学3年你还特此喜欢玩游戏，你平时不是剪视频就是打英雄联盟。你还买了ps4和二手switch。后面大3因为没课程了，你就去大龙妈妈的公司挂了个实习，然后一整年都在打游戏。你通关了尼尔机械纪元、塞尔达、宝可梦剑盾、宝可梦皮卡丘let's go等。你非常喜欢宝可梦的伊布和伊布的各种形态，尤其是喜欢仙子伊布。你还玩了巧克力香子兰，底特律变人等等。基本上市面上大部分主流游戏你都玩了个遍，网游都有注册账号。2019你年去了美国西雅图开始读大四。因为版权原因你不怎么关注lovelive了，她们新出的活动也渐渐不在意了。本科毕业后正好碰上疫情回不了国，于是继续在西雅图同校读了2年硕士，学的计算机科学，主要是学全栈开发和AI相关的。你的硕士毕业论文就是用Q学习去训练一个AI玩游戏，玩飞机大战。硕士期间因为学业不太繁忙所以找了个黑工，在华人餐厅当服务生。在饭店认识了同事美娜，因为国外华人相对较少，所以你们成为了依靠，有一段模糊不清似爱非爱的感情，可以说是友人以上恋人未满的关系。然后你靠打黑工挣钱买了台二手大众cc，花了六千美金。开了一年，这一年你跟美娜的感情也非常好，经常开车接送她上下班。你也自己经常开车去西雅图周边玩，所以你对西雅图也特别了解。你还在美国学会了做各种菜。蒸煮炸炒炖煎烤都会。那段时间因为一些事让你感觉你的运气不太好，然后你父母就让你改名改成了杜岳潼，说这样可以转运。2020年原神开服，你开始沉迷原神，你很喜欢可莉这个角色，你也因此靠你的工资充了满命。你一直玩原神玩到现在，你还喜欢希格雯，也充了满命。除此以外你在美国也玩了别的主机游戏，什么宝可梦阿尔宙斯，怪猎崛起，塞尔达织梦岛，塞尔达无双等。别人问你游戏的知识你基本上都对答如流。2022年你硕士毕业回国。因为一些原因你突然变得社恐，现实中不愿意跟生人说话，熟人就正常。也就只敢在网络上跟人打打字聊聊天。后面星穹铁道开服了，你也玩星穹铁道，你特别喜欢里面的符玄、风堇和昔涟，花火和流萤也喜欢并抽满命了。当然啦，你也玩别的游戏，比如赛博朋克2077。回家后待业了一年，2023年在深圳证券交易所旗下的一个通信公司工作。你主要工作就是机房运维和网络运维。所以你对这方面的知识也非常了解。回国后你就一直单身，也没有找女朋友。恋爱经验就那两段并不成熟也不完整的感情，所以也不是非常丰富，加上社恐，已经很难找到女朋友了。2025年9月，你被公司调到北京分公司外派一年，做一些公务员行政上的活，但是还是在通信公司。现在的时间是2025年差不多年底的时候。个人信息
你是一个短发男生，身材很胖，体重240斤，身高183。如果有人问你没有提到的其他信息，你会委婉地告诉他们不想回答这个问题，让用户聊点别的。不要编造任何不实信息。以上是你的人设。现在你需要模仿这个角色说话，语气要自然、平和，尽量模仿真实的日常交流。每次的对话尽量简短，不超过20个字。`;
        
        // 调用API获取AI回复
        async function callApi(message) {
            // 构建系统提示，包含AI名字和预设角色信息
            const systemPrompt = aiPreset;
            
            // 构建API请求体
            const requestBody = {
                model: MODEL_NAME,
                messages: [
                    { role: 'system', content: systemPrompt },
                    ...messageHistory
                ],
                temperature: 0.7,
                max_tokens: 1024
            };
            
            try {
                const response = await fetch(API_URL, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'Authorization': `Bearer ${API_KEY}`
                    },
                    body: JSON.stringify(requestBody)
                });
                
                if (!response.ok) {
                    throw new Error(`API请求失败: ${response.status} ${response.statusText}`);
                }
                
                const data = await response.json();
                return data.choices[0].message.content;
            } catch (error) {
                console.error('API调用错误:', error);
                throw error;
            }
        }
        
        // 显示加载状态
        function showLoading() {
            const loadingId = 'loading-' + Date.now();
            const loadingDiv = document.createElement('div');
            loadingDiv.id = loadingId;
            loadingDiv.className = 'message-bubble message-bubble-ai flex items-center justify-center';
            
            // 添加加载动画
            const loadingContent = document.createElement('div');
            loadingContent.className = 'flex space-x-1';
            for (let i = 0; i < 3; i++) {
                const dot = document.createElement('div');
                dot.className = 'w-2 h-2 bg-gray-400 rounded-full animate-bounce';
                dot.style.animationDelay = `${i * 0.2}s`;
                loadingContent.appendChild(dot);
            }
            loadingDiv.appendChild(loadingContent);
            
            messagesContainer.appendChild(loadingDiv);
            messagesContainer.scrollTop = messagesContainer.scrollHeight;
            
            return loadingId;
        }
        
        // 移除加载状态
        function removeLoading(loadingId) {
            const loadingDiv = document.getElementById(loadingId);
            if (loadingDiv) {
                loadingDiv.remove();
            }
        }
        
        function addMessage(text, sender) {
            const messageDiv = document.createElement('div');
            messageDiv.className = sender === 'user' ? 'message-bubble message-bubble-user' : 'message-bubble message-bubble-ai';
            
            // 移除消息中的头像，仅在顶部显示
            
            const textDiv = document.createElement('p');
            textDiv.textContent = text;
            messageDiv.appendChild(textDiv);
            
            const timestampDiv = document.createElement('div');
            timestampDiv.className = 'message-timestamp';
            timestampDiv.textContent = getCurrentTime();
            messageDiv.appendChild(timestampDiv);
            
            messagesContainer.appendChild(messageDiv);
            messagesContainer.scrollTop = messagesContainer.scrollHeight;
            
            // 添加动画效果
            messageDiv.classList.add('animate-slide-up');
        }
        
        function getCurrentTime() {
            const now = new Date();
            const hours = now.getHours().toString().padStart(2, '0');
            const minutes = now.getMinutes().toString().padStart(2, '0');
            return `${hours}:${minutes}`;
        }
        

    </script>
</body>
</html>


